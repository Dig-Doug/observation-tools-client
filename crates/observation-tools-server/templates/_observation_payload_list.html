<div 
     id="observations-list"
     hx-get="/exe/{{ execution_id }}/_/components/?offset={{ offset }}&limit={{ limit }}"
     hx-trigger="every 2s"
     hx-select="#observations-list"
     hx-swap="outerHTML"
>
  {% if observations %}
      <ul class="list-none">
        {% for obs in observations %}
          <li data-testid="ObservationListItem" class="my-2">
            <a
              data-testid="ObservationListItemLink"
              href="{{ base_path }}?obs={{ obs.id }}"
              class="underline cursor-pointer text-black dark:text-neutral-200 hover:text-blue-600 dark:hover:text-blue-400 {% if selected_observation and selected_observation.id == obs.id %}font-bold{% endif %}"
            >{{ obs.name }}</a
            >
            <span class="text-neutral-600 dark:text-neutral-400 text-sm">
                      — {{ obs.payload.mime_type }}
              {% if obs.source %}— {{ obs.source.file }}:{{ obs.source.line }}{% endif %}
              — {{ obs.created_at }}
                    </span>
            {% if obs.labels %}
              <br /><span class="text-neutral-600 dark:text-neutral-400 text-sm"
            >labels: {{ obs.labels|join(", ") }}</span
            >
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% if total_count %}
      <div class="mt-4 pt-4 border-t border-black dark:border-neutral-200">
        <p data-testid="PaginationInfo" class="mb-2">
                  <span class="text-neutral-600 dark:text-neutral-400 text-sm">
                    showing {{ offset + 1 }}-{{ offset + observations|length }} of {{ total_count }}
                    (page {{ page }})
                  </span>
        </p>
        <div class="flex gap-2">
          {% if offset > 0 %}
            <button
              data-testid="PaginationPrev"
              onclick="window.location.href='{{ base_path }}?offset={{ offset - limit }}&limit={{ limit }}'"
              class="font-mono text-sm px-2 py-1 border border-black dark:border-neutral-200 bg-white dark:bg-neutral-800 text-black dark:text-neutral-200 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400"
            >
              ← prev
            </button>
          {% else %}
            <button
              data-testid="PaginationPrev"
              disabled
              class="font-mono text-sm px-2 py-1 border border-black dark:border-neutral-200 bg-white dark:bg-neutral-800 text-black dark:text-neutral-200 opacity-50 cursor-not-allowed"
            >
              ← prev
            </button>
          {% endif %}
          {% if has_next_page %}
            <button
              data-testid="PaginationNext"
              onclick="window.location.href='{{ base_path }}?offset={{ offset + limit }}&limit={{ limit }}'"
              class="font-mono text-sm px-2 py-1 border border-black dark:border-neutral-200 bg-white dark:bg-neutral-800 text-black dark:text-neutral-200 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400"
            >
              next →
            </button>
          {% else %}
            <button
              data-testid="PaginationNext"
              disabled
              class="font-mono text-sm px-2 py-1 border border-black dark:border-neutral-200 bg-white dark:bg-neutral-800 text-black dark:text-neutral-200 opacity-50 cursor-not-allowed"
            >
              next →
            </button>
          {% endif %}
        </div>
      </div>
    {% endif %}
  {% else %}
    <p>no observations found.</p>
  {% endif %}
</div>
